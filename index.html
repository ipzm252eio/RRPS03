<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Python та REST API — базовий шаблон</title>
  <meta name="description" content="Шаблон HTML-сторінки з коротким оглядом Python та REST API, прикладами коду і корисними ресурсами." />
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
  <header role="banner">
    <div class="container">
      <div class="title">
        <h1>Python та REST API</h1>
        <span class="badge">Шаблон</span>
      </div>
      <p class="lead">Короткий огляд принципів REST, HTTP-методів і практичних прикладів на Python для створення та споживання веб‑сервісів.</p>
      <nav aria-label="Основна навігація">
        <a href="#overview">Огляд</a>
        <a href="#methods">HTTP-методи</a>
        <a href="#server">Сервер на FastAPI</a>
        <a href="#client">Клієнт на Requests</a>
        <a href="#resources">Ресурси</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <main role="main">
      <div>
        <section id="overview" aria-labelledby="overview-title">
          <h2 id="overview-title">Огляд REST та Python</h2>
          <p>REST — архітектурний стиль побудови веб‑API, що використовує стандартні можливості HTTP для роботи з ресурсами: ідентифікація URL, методи для CRUD‑операцій, статуст‑коди та заголовки. Python пропонує зрозумілий синтаксис і зрілу екосистему бібліотек для швидкої розробки таких сервісів і клієнтів.</p>
          <ul class="list">
            <li><strong>Ресурси:</strong> сутності, доступні за URI (наприклад, <code>/api/items/42</code>).</li>
            <li><strong>Представлення:</strong> JSON як основний формат обміну.</li>
            <li><strong>Статус‑коди:</strong> 200, 201, 204, 400, 404, 500 — чітка семантика відповіді.</li>
            <li><strong>Безпека:</strong> токени (Bearer), CORS, пагінація, валідація схем.</li>
          </ul>
        </section>

        <section id="methods" aria-labelledby="methods-title">
          <h2 id="methods-title">HTTP‑методи та семантика</h2>
          <ul class="list">
            <li><strong>GET:</strong> читання ресурсу (без побічних ефектів).</li>
            <li><strong>POST:</strong> створення нового ресурсу.</li>
            <li><strong>PUT:</strong> повне оновлення ресурсу.</li>
            <li><strong>PATCH:</strong> часткове оновлення ресурсу.</li>
            <li><strong>DELETE:</strong> видалення ресурсу.</li>
          </ul>
          <p class="lead"><span class="pill">Idempotent: GET, PUT, DELETE</span><span class="pill">Non‑idempotent: POST</span></p>
        </section>

        <section id="server" aria-labelledby="server-title">
          <h2 id="server-title">Мінімальний REST‑сервер на FastAPI</h2>
          <p>FastAPI — сучасний фреймворк для побудови швидких та типізованих REST‑сервісів. Нижче — приклад CRUD для колекції <code>items</code> з простою пам’яттю в процесі.</p>
          <div class="code">
<pre><code class="language-python"># install: pip install fastapi uvicorn pydantic
from typing import Dict, List, Optional
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel

app = FastAPI(title="Items API", version="1.0.0")

class Item(BaseModel):
    id: int
    name: str
    price: float
    tags: List[str] = []

DB: Dict[int, Item] = {}

@app.get("/api/items", response_model=List[Item])
def list_items():
    return list(DB.values())

@app.get("/api/items/{item_id}", response_model=Item)
def get_item(item_id: int):
    item = DB.get(item_id)
    if not item:
        raise HTTPException(status_code=404, detail="Item not found")
    return item

@app.post("/api/items", response_model=Item, status_code=201)
def create_item(item: Item):
    if item.id in DB:
        raise HTTPException(status_code=400, detail="Item ID already exists")
    DB[item.id] = item
    return item

@app.put("/api/items/{item_id}", response_model=Item)
def replace_item(item_id: int, item: Item):
    if item_id != item.id:
        raise HTTPException(status_code=400, detail="ID mismatch")
    DB[item_id] = item
    return item

@app.patch("/api/items/{item_id}", response_model=Item)
def update_item(item_id: int, name: Optional[str] = None, price: Optional[float] = None):
    item = DB.get(item_id)
    if not item:
        raise HTTPException(status_code=404, detail="Item not found")
    if name is not None:
        item.name = name
    if price is not None:
        item.price = price
    DB[item_id] = item
    return item

@app.delete("/api/items/{item_id}", status_code=204)
def delete_item(item_id: int):
    if item_id not in DB:
        raise HTTPException(status_code=404, detail="Item not found")
    del DB[item_id]
    return None

# Run: uvicorn main:app --reload
</code></pre>
          </div>
          <p>Порада: додавайте валідацію схем, пагінацію для колекцій та узгоджені коди помилок, щоб інтерфейс був передбачуваним.</p>
        </section>

        <section id="client" aria-labelledby="client-title">
          <h2 id="client-title">Клієнт для REST‑API на Python (Requests)</h2>
          <p>Requests спрощує виклики HTTP. Приклад нижче показує створення, читання та видалення ресурсу.</p>
          <div class="code">
<pre><code class="language-python"># install: pip install requests
import requests

BASE_URL = "http://localhost:8000/api/items"

new_item = {"id": 1, "name": "Keyboard", "price": 49.9, "tags": ["peripheral"]}

# Create
r = requests.post(BASE_URL, json=new_item)
print("POST:", r.status_code, r.json())

# Read all
r = requests.get(BASE_URL)
print("GET:", r.status_code, r.json())

# Read one
r = requests.get(f"{BASE_URL}/1")
print("GET one:", r.status_code, r.json())

# Delete
r = requests.delete(f"{BASE_URL}/1")
print("DELETE:", r.status_code)
</code></pre>
          </div>
          <p>Для захищених API додайте заголовок <code>Authorization: Bearer &lt;token&gt;</code>, керуйте таймаутами та обробляйте помилки через <code>try/except</code>.</p>
        </section>

        <section id="resources" aria-labelledby="resources-title">
          <h2 id="resources-title">Корисні ресурси</h2>
          <ul class="list">
            <li><strong>Python Docs:</strong> <a href="https://docs.python.org/3/" target="_blank" rel="noopener">docs.python.org/3</a></li>
            <li><strong>FastAPI:</strong> <a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener">fastapi.tiangolo.com</a></li>
            <li><strong>Requests:</strong> <a href="https://requests.readthedocs.io/" target="_blank" rel="noopener">requests.readthedocs.io</a></li>
            <li><strong>HTTP статус‑коди:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener">MDN: HTTP Status</a></li>
            <li><strong>REST принципи:</strong> <a href="https://restfulapi.net/" target="_blank" rel="noopener">restfulapi.net</a></li>
          </ul>
        </section>
      </div>

      <aside aria-label="Поради та нотатки">
        <h3>Нотатки для продакшн</h3>
        <ul class="list">
          <li><strong>Контракти:</strong> OpenAPI/Swagger для документування.</li>
          <li><strong>Стабільність:</strong> версіонування URL (наприклад, <code>/v1</code>).</li>
          <li><strong>Безпека:</strong> JWT, rate limiting, audit‑логування.</li>
          <li><strong>Ефективність:</strong> кешування, пагінація, фільтри та сортування.</li>
          <li><strong>Спостережність:</strong> структуровані логи, метрики, трасування.</li>
        </ul>
      </aside>
    </main>

    <footer class="footer" role="contentinfo">
      <p>© 2025 Python & REST API Template. Використовуйте та адаптуйте без обмежень.</p>
    </footer>
  </div>
</body>
</html>